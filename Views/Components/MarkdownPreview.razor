@using Markdig;
@using Microsoft.AspNetCore.Components
@using Syncfusion.Blazor.Navigations
@using Syncfusion.Blazor

<SfTab CssClass=@("default-tab")>
    <TabAnimationSettings>
        <TabAnimationPrevious Effect=AnimationEffect.None></TabAnimationPrevious>
        <TabAnimationNext Effect=AnimationEffect.None></TabAnimationNext>
    </TabAnimationSettings>
    <TabItems>
        <TabItem>
            <ChildContent>
                <TabHeader Text="Edit"></TabHeader>
            </ChildContent>
            <ContentTemplate>
                <div>
                    <textarea id="Description" name="Description" rows="10" style="width: 100%" @oninput="OnTextChanged"></textarea>
                </div>
            </ContentTemplate>
        </TabItem>
        <TabItem>
            <ChildContent>
                <TabHeader Text="Preview"></TabHeader>
            </ChildContent>
            <ContentTemplate>
                <div class="scrollable-div ">
                    @Html
                </div>
            </ContentTemplate>
        </TabItem>
    </TabItems>
</SfTab>

@code {
    public MarkupString Html { get; set; }

    protected void OnTextChanged(Microsoft.AspNetCore.Components.ChangeEventArgs args)
    {
        Html = (MarkupString)Markdown.ToHtml(args.Value!.ToString()!);
        InvokeAsync(() => StateHasChanged());
    }
}
